<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>GWD Consulting ‚Äî LIVE Dashboard v2.0</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #eaeaea;
            min-height: 100vh;
            padding: 10px;
            margin: 0;
            width: 100%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(90deg, #00d4ff, #7b2cbf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
        }
        
        .live-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #4caf50;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        .live-dot {
            width: 8px;
            height: 8px;
            background: #4caf50;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            width: 100%;
        }
        
        .card {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .card-icon { font-size: 2rem; }
        .card-title { font-size: 1.2rem; font-weight: 600; }
        .card-role { font-size: 0.85rem; color: #888; }
        
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: auto;
        }
        
        .status.active { background: rgba(0, 212, 255, 0.2); color: #00d4ff; }
        .status.online { background: rgba(76, 175, 80, 0.2); color: #4caf50; }
        
        .live-data {
            background: rgba(0,0,0,0.2);
            padding: 12px;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .live-data.loading {
            color: #888;
            font-style: italic;
        }
        
        .live-data.error {
            color: #ff6b6b;
        }
        
        .weather-main {
            font-size: 2rem;
            margin: 10px 0;
        }
        
        .weather-details {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        
        .weather-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .news-list {
            list-style: none;
        }
        
        .news-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .news-list li:last-child { border-bottom: none; }
        
        .news-list a {
            color: #00d4ff;
            text-decoration: none;
        }
        
        .news-list a:hover { text-decoration: underline; }
        
        .news-source {
            color: #888;
            font-size: 0.8rem;
            margin-top: 4px;
        }
        
        .budget-bar {
            background: rgba(0,0,0,0.3);
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 10px;
        }
        
        .budget-used {
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #ffc107);
            transition: width 0.5s;
        }
        
        .budget-used.warning {
            background: linear-gradient(90deg, #ffc107, #ff6b6b);
        }
        
        .budget-used.danger {
            background: #ff6b6b;
        }
        
        .timestamp {
            text-align: center;
            color: #666;
            font-size: 0.85rem;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü¶û GWD Consulting</h1>
        <div style="color: #888;">Global World Domination ‚Äî Live Operations Center</div>
        <div class="live-indicator">
            <span class="live-dot"></span>
            <span>LIVE DATA</span>
            <span id="refresh-timer">(refreshing in 60s)</span>
        </div>
    </div>

    <div class="dashboard-grid">
        <!-- Live Weather Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-icon">üå§Ô∏è</span>
                <div>
                    <div class="card-title">Burlington Weather</div>
                    <div class="card-role">Live Conditions</div>
                </div>
                <span class="status online">Live</span>
            </div>
            <div id="weather-data" class="live-data loading">
                Loading weather data...
            </div>
        </div>

        <!-- Live News Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-icon">üì∞</span>
                <div>
                    <div class="card-title">Top Headlines</div>
                    <div class="card-role">Canada & World</div>
                </div>
                <span class="status online">Live</span>
            </div>
            <div id="news-data" class="live-data loading">
                Loading news...
            </div>
        </div>

        <!-- Live Budget Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-icon">üêï‚Äçü¶∫</span>
                <div>
                    <div class="card-title">Daily Budget</div>
                    <div class="card-role">Rosco Monitoring</div>
                </div>
                <span class="status active">$5 Max</span>
            </div>
            <div class="live-data">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span>Today's Spend:</span>
                    <span id="budget-amount">$0.00 / $5.00</span>
                </div>
                <div class="budget-bar">
                    <div id="budget-bar" class="budget-used" style="width: 0%"></div>
                </div>
                <div style="margin-top: 10px; font-size: 0.85rem; color: #888;">
                    Last updated: <span id="budget-time">--:--</span>
                </div>
            </div>
        </div>

        <!-- Team Status Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-icon">üë•</span>
                <div>
                    <div class="card-title">Team Status</div>
                    <div class="card-role">12 Members</div>
                </div>
                <span class="status online">Active</span>
            </div>
            <div class="live-data">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; font-size: 0.9rem;">
                    <div>ü¶û CEO: <span style="color: #4caf50">Online</span></div>
                    <div>üöÄ Buzz: <span style="color: #4caf50">Ready</span></div>
                    <div>üßô‚Äç‚ôÇÔ∏è Gandalf: <span style="color: #4caf50">Available</span></div>
                    <div>ü•∑ Ninja: <span style="color: #4caf50">Active</span></div>
                    <div>üë©‚Äçüè´ Kazza: <span style="color: #00d4ff">New Hire</span></div>
                    <div>üêï‚Äçü¶∫ Rosco: <span style="color: #00d4ff">New Hire</span></div>
                    <div>üß† BrainZ: <span style="color: #4caf50">24/7</span></div>
                    <div>üßå Chunk: <span style="color: #4caf50">On Duty</span></div>
                </div>
            </div>
        </div>

        <!-- Next Briefing Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-icon">üìÖ</span>
                <div>
                    <div class="card-title">Next Briefing</div>
                    <div class="card-role">GWD Morning Brief</div>
                </div>
                <span class="status active">Scheduled</span>
            </div>
            <div class="live-data">
                <div style="font-size: 1.5rem; margin: 10px 0;" id="countdown">
                    Calculating...
                </div>
                <div style="color: #888;">
                    Tomorrow 6:00 AM EST
                </div>
            </div>
        </div>

        <!-- Quick Stats Card -->
        <div class="card">
            <div class="card-header">
                <span class="card-icon">üìä</span>
                <div>
                    <div class="card-title">Quick Stats</div>
                    <div class="card-role">Today's Activity</div>
                </div>
                <span class="status active">Live</span>
            </div>
            <div class="live-data">
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; text-align: center;">
                    <div>
                        <div style="font-size: 1.8rem; color: #00d4ff;">12</div>
                        <div style="font-size: 0.85rem; color: #888;">Team Members</div>
                    </div>
                    <div>
                        <div style="font-size: 1.8rem; color: #4caf50;" id="api-calls">0</div>
                        <div style="font-size: 0.85rem; color: #888;">API Calls Today</div>
                    </div>
                    <div>
                        <div style="font-size: 1.8rem; color: #ffc107;">8</div>
                        <div style="font-size: 0.85rem; color: #888;">Decisions Logged</div>
                    </div>
                    <div>
                        <div style="font-size: 1.8rem; color: #ff6b6b;">2</div>
                        <div style="font-size: 0.85rem; color: #888;">Active Alerts</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="timestamp">
        <div id="current-time">--</div>
        <div style="margin-top: 5px;">GWD Consulting ü¶û Global World Domination ‚Äî Self-Sufficient Operations</div>
    </div>

    <script>
        // Configuration
        const OPENWEATHER_API_KEY = '04832d02538c589665439846bde74042';
        const NEWS_API_KEY = 'b6b63436a2fb444da6a93ec02306c0a5';
        const BURLINGTON_LAT = 43.3255;
        const BURLINGTON_LON = -79.7990;
        
        // API call counter (stored in memory for session)
        let apiCallsToday = parseInt(localStorage.getItem('apiCallsToday') || '0');
        let lastCallDate = localStorage.getItem('lastCallDate') || new Date().toDateString();
        
        // Reset counter if it's a new day
        if (lastCallDate !== new Date().toDateString()) {
            apiCallsToday = 0;
            localStorage.setItem('lastCallDate', new Date().toDateString());
        }
        
        // Update UI
        document.getElementById('api-calls').textContent = apiCallsToday;
        
        // Fetch Weather
        async function fetchWeather() {
            const weatherEl = document.getElementById('weather-data');
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${BURLINGTON_LAT}&lon=${BURLINGTON_LON}&appid=${OPENWEATHER_API_KEY}&units=metric`);
                
                if (!response.ok) throw new Error('Weather API error');
                
                const data = await response.json();
                apiCallsToday++;
                localStorage.setItem('apiCallsToday', apiCallsToday);
                document.getElementById('api-calls').textContent = apiCallsToday;
                
                const icon = getWeatherIcon(data.weather[0].main);
                const temp = Math.round(data.main.temp);
                const feelsLike = Math.round(data.main.feels_like);
                const humidity = data.main.humidity;
                const wind = Math.round(data.wind.speed * 3.6); // m/s to km/h
                
                weatherEl.innerHTML = `
                    <div class="weather-main">${icon} ${temp}¬∞C</div>
                    <div style="color: #888; text-transform: capitalize;">${data.weather[0].description}</div>
                    <div class="weather-details">
                        <div class="weather-item">üå°Ô∏è Feels like ${feelsLike}¬∞C</div>
                        <div class="weather-item">üíß ${humidity}% humidity</div>
                        <div class="weather-item">üí® ${wind} km/h wind</div>
                    </div>
                `;
                weatherEl.classList.remove('loading', 'error');
            } catch (err) {
                weatherEl.innerHTML = `‚ö†Ô∏è Unable to load weather<br><small>${err.message}</small>`;
                weatherEl.classList.add('error');
            }
        }
        
        function getWeatherIcon(condition) {
            const icons = {
                'Clear': '‚òÄÔ∏è',
                'Clouds': '‚òÅÔ∏è',
                'Rain': 'üåßÔ∏è',
                'Drizzle': 'üå¶Ô∏è',
                'Thunderstorm': '‚õàÔ∏è',
                'Snow': 'üå®Ô∏è',
                'Mist': 'üå´Ô∏è',
                'Fog': 'üå´Ô∏è'
            };
            return icons[condition] || 'üå§Ô∏è';
        }
        
        // Fetch News
        async function fetchNews() {
            const newsEl = document.getElementById('news-data');
            try {
                const response = await fetch(`https://newsapi.org/v2/top-headlines?country=ca&pageSize=5&apiKey=${NEWS_API_KEY}`);
                
                if (!response.ok) throw new Error('News API error');
                
                const data = await response.json();
                apiCallsToday++;
                localStorage.setItem('apiCallsToday', apiCallsToday);
                document.getElementById('api-calls').textContent = apiCallsToday;
                
                if (data.articles && data.articles.length > 0) {
                    const articles = data.articles.slice(0, 5);
                    newsEl.innerHTML = `<ul class="news-list">${articles.map(article => `
                        <li>
                            <a href="${article.url}" target="_blank" rel="noopener">${article.title}</a>
                            <div class="news-source">${article.source.name} ‚Äî ${formatTime(article.publishedAt)}</div>
                        </li>
                    `).join('')}</ul>`;
                } else {
                    newsEl.innerHTML = 'No headlines available';
                }
                newsEl.classList.remove('loading', 'error');
            } catch (err) {
                newsEl.innerHTML = `‚ö†Ô∏è Unable to load news<br><small>${err.message}</small>`;
                newsEl.classList.add('error');
            }
        }
        
        function formatTime(isoString) {
            const date = new Date(isoString);
            const hours = Math.floor((Date.now() - date) / (1000 * 60 * 60));
            if (hours < 1) return 'Just now';
            if (hours === 1) return '1 hour ago';
            if (hours < 24) return `${hours} hours ago`;
            return `${Math.floor(hours / 24)} days ago`;
        }
        
        // Budget tracking (simulated for now - would connect to real data)
        function updateBudget() {
            // This would connect to actual usage tracking
            // For now, showing simulated low usage
            const spend = 0.12; // Example: $0.12 spent today
            const percent = (spend / 5) * 100;
            
            document.getElementById('budget-amount').textContent = `$${spend.toFixed(2)} / $5.00`;
            const bar = document.getElementById('budget-bar');
            bar.style.width = `${percent}%`;
            
            if (percent > 80) bar.classList.add('danger');
            else if (percent > 60) bar.classList.add('warning');
            
            document.getElementById('budget-time').textContent = new Date().toLocaleTimeString();
        }
        
        // Countdown to next briefing
        function updateCountdown() {
            const now = new Date();
            const tomorrow = new Date(now);
            tomorrow.setDate(tomorrow.getDate() + 1);
            tomorrow.setHours(6, 0, 0, 0);
            
            const diff = tomorrow - now;
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            document.getElementById('countdown').textContent = `${hours}h ${minutes}m`;
        }
        
        // Update current time
        function updateTime() {
            document.getElementById('current-time').textContent = 
                new Date().toLocaleString('en-CA', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    timeZone: 'America/Toronto'
                }) + ' EST';
        }
        
        // Refresh timer
        let refreshSeconds = 60;
        function updateRefreshTimer() {
            refreshSeconds--;
            if (refreshSeconds <= 0) {
                refreshSeconds = 60;
                fetchWeather();
                fetchNews();
            }
            document.getElementById('refresh-timer').textContent = `(refreshing in ${refreshSeconds}s)`;
        }
        
        // Initialize
        fetchWeather();
        fetchNews();
        updateBudget();
        updateCountdown();
        updateTime();
        
        // Update intervals
        setInterval(updateTime, 1000);
        setInterval(updateCountdown, 60000);
        setInterval(updateRefreshTimer, 1000);
        setInterval(updateBudget, 300000); // Every 5 minutes
    </script>
</body>
</html>
